"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[797],{8797:function(e,r,n){n.r(r),n.d(r,{default:function(){return W}});var t,i=n(3433),o=n(5861),a=n(4687),s=n.n(a),d=(n(2791),n(1243)),l=n(1686),u=n.n(l),c=n(5705),p=n(6727),m=n(9434),h=n(2894),f="https://js.stripe.com/v3",v=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,x="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",b=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(f).concat(r);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},N=null,w=null,j=null,y=function(e){return null!==N?N:(N=new Promise((function(r,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(x),window.Stripe)r(window.Stripe);else try{var t=function(){for(var e=document.querySelectorAll('script[src^="'.concat(f,'"]')),r=0;r<e.length;r++){var n=e[r];if(v.test(n.src))return n}return null}();if(t&&e)console.warn(x);else if(t){if(t&&null!==j&&null!==w){var i;t.removeEventListener("load",j),t.removeEventListener("error",w),null===(i=t.parentNode)||void 0===i||i.removeChild(t),t=b(e)}}else t=b(e);j=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}}(r,n),w=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),t.addEventListener("load",j),t.addEventListener("error",w)}catch(o){return void n(o)}else r(null)}))).catch((function(e){return N=null,Promise.reject(e)}))},g=function(e,r,n){if(null===e)return null;var t=e.apply(void 0,r);return function(e,r){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.2.0",startTime:r})}(t,n),t},S=!1,_=function(){return t||(t=y(null).catch((function(e){return t=null,Promise.reject(e)})))};Promise.resolve().then((function(){return _()})).catch((function(e){S||console.warn(e)}));var E,k,D,P=n(3666),q=n(168),Z=n(7924),C=(0,Z.ZP)(c.l0)(E||(E=(0,q.Z)(["\n  max-width: 350px;\n  margin: 0 auto;\n  padding: 30px 0;\n"]))),F=Z.ZP.div(k||(k=(0,q.Z)(["\n  margin-bottom: 20px;\n  position: relative;\n\n  label {\n    display: block;\n    margin-bottom: 5px;\n  }\n\n  input {\n    width: 320px;\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    font-size: 16px;\n  }\n\n  input:focus {\n    outline: none;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 4px;\n  }\n\n  .error {\n    position: absolute;\n    bottom: -16px;\n    right: 8px;\n    color: #ff0000;\n    font-size: 14px;\n  }\n"]))),R=Z.ZP.button(D||(D=(0,q.Z)(["\n  padding: 10px 20px;\n  height: 50px;\n  background-color: var(--main-green-color);\n  color: var(--main-light-text-color);\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: var(--main-transition);\n\n  &:hover {\n    background-color: var(--main-pink-color);\n  }\n"]))),T=n(184),L={width:"340px",titleFontSize:"20px",messageFontSize:"18px",titleColor:"#556b2f",okButtonBackground:"#556b2f"},A={firstName:"",lastName:"",phoneNumber:"",address:"",deliveryDate:""},O=p.Ry().shape({firstName:p.Z_().required("Required"),lastName:p.Z_().required("Required"),phoneNumber:p.Z_().required("Required"),address:p.Z_().required("Required"),deliveryDate:p.hT().required("Required")}),B=function(){var e=(0,m.I0)(),r=(0,m.v9)(h.$),n=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];S=!0;var t=Date.now();return _().then((function(e){return g(e,r,t)}))}({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_PUBLISHABLE_KEY),t=function(){var t=(0,o.Z)(s().mark((function t(a){var l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l={firstName:a.firstName,lastName:a.lastName,phoneNumber:a.phoneNumber,address:a.address,deliveryDate:a.deliveryDate,bouquets:(0,i.Z)(r)};try{u().Confirm.show("Order payment","Go to order payment?","Yes","No",(0,o.Z)(s().mark((function t(){var i,o,a,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e((0,P.p)(l)),i=r.map((function(e){return{price_data:{currency:"eur",product_data:{name:e.name,description:e.description,images:[e.url]},unit_amount:100*e.price},quantity:e.quantity}})),t.next=4,d.Z.post("https://floristry-backend.onrender.com/api/checkout",{lineItems:i});case 4:return o=t.sent,a=o.data,t.next=8,n;case 8:return u=t.sent,t.next=11,u.redirectToCheckout({sessionId:a.id});case 11:case"end":return t.stop()}}),t)}))),(function(){}),L)}catch(c){console.error("Error:",c.message)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,T.jsx)(c.J9,{initialValues:A,validationSchema:O,onSubmit:t,children:function(e){var r=e.errors,n=e.touched;return(0,T.jsxs)(C,{children:[(0,T.jsxs)(F,{children:[(0,T.jsx)("label",{htmlFor:"firstName",children:"First Name"}),(0,T.jsx)(c.gN,{name:"firstName"}),r.firstName&&n.firstName&&(0,T.jsx)("div",{className:"error",children:r.firstName})]}),(0,T.jsxs)(F,{children:[(0,T.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),(0,T.jsx)(c.gN,{name:"lastName"}),r.lastName&&n.lastName&&(0,T.jsx)("div",{className:"error",children:r.lastName})]}),(0,T.jsxs)(F,{children:[(0,T.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,T.jsx)(c.gN,{type:"tel",name:"phoneNumber",placeholder:"Enter phone number"}),r.phoneNumber&&n.phoneNumber&&(0,T.jsx)("div",{className:"error",children:r.phoneNumber})]}),(0,T.jsxs)(F,{children:[(0,T.jsx)("label",{htmlFor:"address",children:"Address"}),(0,T.jsx)(c.gN,{name:"address"}),r.address&&n.address&&(0,T.jsx)("div",{className:"error",children:r.address})]}),(0,T.jsxs)(F,{children:[(0,T.jsx)("label",{htmlFor:"deliveryDate",children:"Delivery Date"}),(0,T.jsx)(c.gN,{type:"date",name:"deliveryDate"}),r.deliveryDate&&n.deliveryDate&&(0,T.jsx)("div",{className:"error",children:r.deliveryDate})]}),(0,T.jsx)(R,{type:"submit",children:"Continue"})]})}})},I=function(){return(0,T.jsx)("div",{children:(0,T.jsx)(B,{})})};function W(){return(0,T.jsx)(I,{})}},2894:function(e,r,n){n.d(r,{$:function(){return t}});var t=function(e){return e.cartProducts.products}}}]);
//# sourceMappingURL=797.7909c59e.chunk.js.map