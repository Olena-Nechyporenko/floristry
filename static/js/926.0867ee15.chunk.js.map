{"version":3,"file":"static/js/926.0867ee15.chunk.js","mappings":"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","sources":["../node_modules/@stripe/stripe-js/dist/index.mjs","components/PaymentForm/PaymentForm.styled.jsx","components/PaymentForm/PaymentForm.jsx","components/Payment/Payment.jsx","pages/PaymentPage/PaymentPage.jsx","redux/cart/selectors.js"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"3.2.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function () {\n    reject(new Error('Failed to load Stripe.js'));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise[\"catch\"](function (error) {\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise$1;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise$1) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n  return stripePromise$1;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import { Form } from 'formik';\nimport styled from 'styled-components';\n\nexport const StyledForm = styled(Form)`\n  max-width: 350px;\n  margin: 0 auto;\n  padding: 30px 0;\n`;\n\nexport const StyledFormField = styled.div`\n  margin-bottom: 20px;\n  position: relative;\n\n  label {\n    display: block;\n    margin-bottom: 5px;\n  }\n\n  input {\n    width: 320px;\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    font-size: 16px;\n  }\n\n  input:focus {\n    outline: none;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 4px;\n  }\n\n  .error {\n    position: absolute;\n    bottom: -16px;\n    right: 8px;\n    color: #ff0000;\n    font-size: 14px;\n  }\n`;\n\nexport const StyledButton = styled.button`\n  padding: 10px 20px;\n  height: 50px;\n  background-color: var(--main-green-color);\n  color: var(--main-light-text-color);\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: var(--main-transition);\n\n  &:hover {\n    background-color: var(--main-pink-color);\n  }\n`;\n","import React from 'react';\nimport axios from 'axios';\nimport * as Yup from 'yup';\nimport Notiflix from 'notiflix';\nimport { Formik, Field } from 'formik';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectCartProducts } from 'redux/cart/selectors';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { addToOrder } from 'redux/orders/ordersSlice';\nimport {\n  StyledButton,\n  StyledForm,\n  StyledFormField,\n} from './PaymentForm.styled';\n\nconst notiflixShowOptions = {\n  width: '340px',\n  titleFontSize: '20px',\n  messageFontSize: '18px',\n  titleColor: '#556b2f',\n  okButtonBackground: '#556b2f',\n};\n\nconst initialValues = {\n  firstName: '',\n  lastName: '',\n  phoneNumber: '',\n  address: '',\n  deliveryDate: '',\n};\n\nconst validationSchema = Yup.object().shape({\n  firstName: Yup.string().required('Required'),\n  lastName: Yup.string().required('Required'),\n  phoneNumber: Yup.string().required('Required'),\n  address: Yup.string().required('Required'),\n  deliveryDate: Yup.date().required('Required'),\n});\n\nexport const PaymentForm = () => {\n  const dispatch = useDispatch();\n  const orderedBouquets = useSelector(selectCartProducts);\n\n  const stripePromise = loadStripe(process.env.REACT_APP_PUBLISHABLE_KEY);\n\n  const handleSubmit = async values => {\n    const newOrder = {\n      firstName: values.firstName,\n      lastName: values.lastName,\n      phoneNumber: values.phoneNumber,\n      address: values.address,\n      deliveryDate: values.deliveryDate,\n      bouquets: [...orderedBouquets],\n    };\n\n    try {\n      Notiflix.Confirm.show(\n        'Order payment',\n        `Go to order payment?`,\n        'Yes',\n        'No',\n        async function () {\n          dispatch(addToOrder(newOrder));\n          const lineItems = orderedBouquets.map(item => {\n            return {\n              price_data: {\n                currency: 'eur',\n                product_data: {\n                  name: item.name,\n                  description: item.description,\n                  images: [item.url],\n                },\n                unit_amount: item.price * 100,\n              },\n              quantity: item.quantity,\n            };\n          });\n\n          const { data } = await axios.post(\n            'https://floristry-backend.onrender.com/api/checkout',\n            {\n              lineItems,\n            }\n          );\n\n          const stripe = await stripePromise;\n          await stripe.redirectToCheckout({ sessionId: data.id });\n        },\n        function () {\n          return;\n        },\n        notiflixShowOptions\n      );\n    } catch (error) {\n      console.error('Error:', error.message);\n    }\n  };\n\n  return (\n    <Formik\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      onSubmit={handleSubmit}\n    >\n      {({ errors, touched }) => (\n        <StyledForm>\n          <StyledFormField>\n            <label htmlFor=\"firstName\">First Name</label>\n            <Field name=\"firstName\" />\n            {errors.firstName && touched.firstName && (\n              <div className=\"error\">{errors.firstName}</div>\n            )}\n          </StyledFormField>\n          <StyledFormField>\n            <label htmlFor=\"lastName\">Last Name</label>\n            <Field name=\"lastName\" />\n            {errors.lastName && touched.lastName && (\n              <div className=\"error\">{errors.lastName}</div>\n            )}\n          </StyledFormField>\n          <StyledFormField>\n            <label htmlFor=\"phoneNumber\">Phone Number</label>\n            <Field\n              type=\"tel\"\n              name=\"phoneNumber\"\n              placeholder=\"Enter phone number\"\n            />\n            {errors.phoneNumber && touched.phoneNumber && (\n              <div className=\"error\">{errors.phoneNumber}</div>\n            )}\n          </StyledFormField>\n\n          <StyledFormField>\n            <label htmlFor=\"address\">Address</label>\n            <Field name=\"address\" />\n            {errors.address && touched.address && (\n              <div className=\"error\">{errors.address}</div>\n            )}\n          </StyledFormField>\n          <StyledFormField>\n            <label htmlFor=\"deliveryDate\">Delivery Date</label>\n            <Field type=\"date\" name=\"deliveryDate\" />\n            {errors.deliveryDate && touched.deliveryDate && (\n              <div className=\"error\">{errors.deliveryDate}</div>\n            )}\n          </StyledFormField>\n          <StyledButton type=\"submit\">Continue</StyledButton>\n        </StyledForm>\n      )}\n    </Formik>\n  );\n};\n","import { PaymentForm } from 'components/PaymentForm/PaymentForm';\n\nexport const Payment = () => {\n  return (\n    <div>\n      <PaymentForm />\n    </div>\n  );\n};\n","import { Payment } from 'components/Payment/Payment';\n\nexport default function PaymentPage() {\n  return <Payment />;\n}\n","export const selectCartProducts = state => state.cartProducts.products;\n"],"names":["stripePromise$1","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","injectScript","params","queryString","advancedFraudSignals","script","document","createElement","src","concat","headOrBody","head","body","Error","appendChild","stripePromise","onErrorListener","onLoadListener","loadScript","Promise","resolve","reject","window","Stripe","console","warn","scripts","querySelectorAll","i","length","test","findScript","_script$parentNode","removeEventListener","parentNode","removeChild","onLoad","onError","addEventListener","error","initStripe","maybeStripe","args","startTime","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","loadCalled","getStripePromise","then","StyledForm","styled","Form","StyledFormField","StyledButton","notiflixShowOptions","width","titleFontSize","messageFontSize","titleColor","okButtonBackground","initialValues","firstName","lastName","phoneNumber","address","deliveryDate","validationSchema","Yup","shape","required","PaymentForm","dispatch","useDispatch","orderedBouquets","useSelector","selectCartProducts","_len","arguments","Array","_key","Date","now","loadStripe","process","REACT_APP_PUBLISHABLE_KEY","handleSubmit","values","newOrder","bouquets","Notiflix","addToOrder","lineItems","map","item","price_data","currency","product_data","description","images","url","unit_amount","price","quantity","axios","data","redirectToCheckout","sessionId","id","message","onSubmit","errors","touched","htmlFor","className","type","placeholder","Payment","PaymentPage","state","cartProducts","products"],"sourceRoot":""}